(this["webpackJsonpweb-shop-react"]=this["webpackJsonpweb-shop-react"]||[]).push([[0],{35:function(e,t,a){e.exports=a(68)},40:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),o=(a(40),a(7)),i=a(8),u=a(31),d=a.n(u),s=Object(n.createContext)({}),m=function(e){var t=e.baseUrl,a=e.children,n=d.a.create({baseURL:t});return r.a.createElement(s.Provider,{value:{api:n}},a)},p=a(19),f=a(10),v=a(11),b=a(2),E={id:-1,name:"All"},h=r.a.createContext({}),C=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(b.a)(a,2),l=c[0],o=c[1],i=Object(n.useContext)(s).api,u=Object(n.useCallback)((function(e){var t=l.map((function(t){return t.id===e.id?Object(v.a)({},e,{isAddedToCart:!0}):t}));o(Object(f.a)(t))}),[l]),d=Object(n.useCallback)((function(e){var t=l.map((function(t){return t.id===e.id?Object(v.a)({},e,{isAddedToCart:!1}):t}));o(Object(f.a)(t))}),[l]),m=Object(n.useCallback)((function(){i&&i.get("products").then((function(e){return e.data})).then((function(e){o(e)}))}),[i]),E=Object(n.useCallback)((function(e){i&&(e.length>0?i.get("search?searchText=".concat(e)).then((function(e){return e.data})).then((function(e){var t=l.filter((function(t){return!!e.find((function(e){return e.id===t.id}))}));o(t)})):m())}),[i,l,m]),C=Object(n.useCallback)((function(){var e=l.map((function(e){var t=e.isAddedToCart,a=Object(p.a)(e,["isAddedToCart"]);return Object(v.a)({},a,{isAddedToCart:!t&&t})}));o(e)}),[l]);return Object(n.useEffect)((function(){m()}),[m]),r.a.createElement(h.Provider,{value:{addToCart:u,removeFromCart:d,products:l,onSearchProduct:E,clearAllCartProduct:C}},t)},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,a=Object(n.useState)([]),r=Object(b.a)(a,2),c=r[0],l=r[1],o=Object(n.useContext)(h),i=o.products,u=o.removeFromCart,d=o.addToCart,s=o.onSearchProduct,m=o.clearAllCartProduct;Object(n.useEffect)((function(){var a=[];i&&(e?i.filter((function(e){return e.isAddedToCart})).forEach((function(e){a.push(Object(v.a)({},e,{quantity:1}))})):i.filter((function(e){return e.productCategory.some((function(e){return e.categoryId===t.id}))||-1===t.id})).forEach((function(e){a.push(Object(v.a)({},e,{quantity:1}))})),l([].concat(a)))}),[i,e,t]);var C=Object(n.useCallback)((function(e){var t=null===i||void 0===i?void 0:i.find((function(t){return t.id===e.id}));t&&u&&u(t)}),[i,u]),O=Object(n.useCallback)((function(e){var t=c.findIndex((function(t){return t.id===e.id})),a=Object(f.a)(c);t>=0&&(a[t].quantity+=1),l(a)}),[c]),j=Object(n.useCallback)((function(e){var t=c.findIndex((function(t){return t.id===e.id})),a=Object(f.a)(c);t>=0&&e.quantity>1&&(a[t].quantity-=1),l(a)}),[c]),g=Object(n.useCallback)((function(e){e.quantity;var t=Object(p.a)(e,["quantity"]);d&&d(t)}),[d]),y=Object(n.useMemo)((function(){return i?i.filter((function(e){return e.isAddedToCart})).length:0}),[i]),N=Object(n.useCallback)((function(e){s&&s(e)}),[s]);return{products:c,removeProduct:C,incrementProduct:O,decrementProduct:j,addToCart:g,clearAllCartProduct:m,totalCartItems:y,onSearch:N}},j=(a(58),function(e){var t=e.categories,a=e.selectCategory,c=e.totalItems,l=e.onSearch,i=Object(n.useState)(""),u=Object(b.a)(i,2),d=u[0],s=u[1];return r.a.createElement("div",{className:"search-container"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("select",{onChange:function(e){var n=t.find((function(t){return t.id===Number(e.target.value)}));n&&a(n)}},t.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))),r.a.createElement("input",{value:d,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{onClick:function(){l(d)}},"Search")),r.a.createElement("div",{className:"cart-wrapper"},r.a.createElement(o.b,{to:"/order/"}," ","".concat(c||0," items in the cart"))))}),g=(a(64),function(){var e=function(){var e=Object(n.useContext)(s).api,t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(E),o=Object(b.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){e&&e.get("categories").then((function(e){return e.data})).then((function(e){c(e)}))}),[e]),{currentCategory:i,categories:Object(n.useMemo)((function(){return[E].concat(Object(f.a)(r))}),[r]),selectCategory:u}}(),t=e.currentCategory,a=e.selectCategory,c=e.categories,l=O(!1,t),o=l.products,i=l.addToCart,u=l.totalCartItems,d=l.onSearch;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"product-search-wrapper"},r.a.createElement("div",{className:"search-wrapper"},r.a.createElement(j,{categories:c,selectCategory:a,totalItems:u,onSearch:d})),r.a.createElement("div",{className:"relative-wrapper"},r.a.createElement("div",{className:"absolute-wrapper"},r.a.createElement("div",{className:"height-wrapper"},r.a.createElement("div",{className:"product-wrapper"},o&&o.map((function(e){return r.a.createElement("div",{key:e.id,className:"product"},r.a.createElement("div",{className:"product-name"},e.name),r.a.createElement("div",null,r.a.createElement("img",{src:e.imageUrl,alt:"",width:"150px",height:"150px"})),r.a.createElement("ul",{className:"product-action"},r.a.createElement("li",null,"Price: ",e.price),r.a.createElement("li",null,!e.isAddedToCart&&r.a.createElement("button",{onClick:function(){i&&i(e)}},"Add to cart"))))}))))))))}),y=a(18),N=a.n(y),w=a(34),k=(a(66),[{id:1,label:"MasterCard"},{id:2,label:"Paypal"},{id:3,label:"Bitcoin"}]),P=function(){var e=O(!0),t=e.products,a=e.removeProduct,c=e.incrementProduct,l=e.decrementProduct,o=e.clearAllCartProduct,u=function(){var e=Object(n.useContext)(s).api;return Object(n.useCallback)((function(t){if(e)return e.post("orders",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return!0}))}),[e])}(),d=Object(i.f)(),m=Object(n.useState)("Your Name"),p=Object(b.a)(m,2),f=p[0],v=p[1],E=Object(n.useState)("Your Email"),h=Object(b.a)(E,2),C=h[0],j=h[1],g=Object(n.useState)("MasterCard"),y=Object(b.a)(g,2),P=y[0],S=y[1],x=Object(n.useMemo)((function(){return t.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t}),0)}),[t]),T=Object(n.useCallback)(function(){var e=Object(w.a)(N.a.mark((function e(a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={companyId:64,createdBy:C,name:f,created:(new Date).toDateString(),paymentMethod:P,totalPrice:x,orderRows:t.filter((function(e){return e.isAddedToCart})).map((function(e){return{amount:e.quantity,productId:e.id}}))},e.next=4,u(n);case 4:e.sent&&(o&&o(),d.push("/"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,o,d,t,f,P,C,x]);return r.a.createElement("div",{className:"order-wrapper"},r.a.createElement("div",{className:"name-filler"},r.a.createElement("form",{onSubmit:T},r.a.createElement("label",null,"Name:",r.a.createElement("input",{type:"text",value:f,onChange:function(e){v(e.target.value)}})),r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"text",value:C,onChange:function(e){j(e.target.value)}})),r.a.createElement("label",null,"Payment Method:",r.a.createElement("select",{onChange:function(e){S(e.target.value)}},k.map((function(e){return r.a.createElement("option",{key:e.id},e.label)})))),r.a.createElement("input",{type:"submit",value:"Submit"}))),r.a.createElement("div",{className:"title-product-wrapper"},r.a.createElement("div",{className:"title"},r.a.createElement("div",null,"Product Image"),r.a.createElement("div",null,"Product Title"),r.a.createElement("div",null,"Product Action"),r.a.createElement("div",null,"Total Cost: ",x)),r.a.createElement("div",{className:"products-container-wrapper"},r.a.createElement("div",{className:"products-container"},r.a.createElement("div",{className:"absolute-container"},r.a.createElement("div",{className:"height-scroll-wrapper"},t&&t.filter((function(e){return e.isAddedToCart})).map((function(e){return r.a.createElement("div",{key:e.name,className:"cart-product"},r.a.createElement("div",null,r.a.createElement("img",{src:e.imageUrl,alt:"",width:"150px",height:"150px"})),r.a.createElement("div",null,e.name),r.a.createElement("div",{className:"action-product"},r.a.createElement("h5",null,"Quantity: ",e.quantity),r.a.createElement("button",{className:"action-btn",onClick:function(){return c(e)}},"+"),r.a.createElement("button",{className:"action-btn",onClick:function(){return l(e)}},"-"),r.a.createElement("button",{onClick:function(){return a(e)}},"Remove")),r.a.createElement("div",null,e.price*e.quantity))}))))))))},S=function(){var e=function(){var e=Object(n.useContext)(s).api,t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1],l=Object(n.useCallback)((function(){e&&e.get("orders?companyId=64").then((function(e){return e.data})).then((function(e){return c(e)})).catch((function(e){return c([])}))}),[e]);return Object(n.useEffect)((function(){l()}),[l]),{orders:r}}().orders;return r.a.createElement("div",{className:"title-product-wrapper"},r.a.createElement("div",{className:"title"},r.a.createElement("div",null,"Date of Order"),r.a.createElement("div",null,"Order By"),r.a.createElement("div",null,"Order Cost"),r.a.createElement("div",null,"Total Ordered Items")),r.a.createElement("div",{className:"products-container-wrapper"},r.a.createElement("div",{className:"products-container"},r.a.createElement("div",{className:"absolute-container"},r.a.createElement("div",{className:"height-scroll-wrapper"},e.map((function(e,t){return r.a.createElement("div",{key:t,className:"cart-product"},r.a.createElement("div",null,new Date(e.created).toDateString()),r.a.createElement("div",null,e.createdBy),r.a.createElement("div",null,e.totalPrice),r.a.createElement("div",null,e.orderRows.length))})))))))},x=(a(67),function(){return r.a.createElement("div",null,"Not Found")}),T=function(){return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(m,{baseUrl:"https://medieinstitutet-wie-products.azurewebsites.net/api/"},r.a.createElement(C,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("div",null,r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/order"},"Orders")),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/admin"},"Administration"))),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:g}),r.a.createElement(i.a,{path:"/order/",component:P}),r.a.createElement(i.a,{path:"/admin/",component:S}),r.a.createElement(i.a,{component:x}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.edea6d91.chunk.js.map